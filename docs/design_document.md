# VR Pac-Man Design Document

## 1. 项目概述

### 1.1 项目名称
VR Pac-Man (暂定名)

### 1.2 项目愿景
将经典的《吃豆人》游戏体验从2D平面无缝过渡至3D沉浸式虚拟现实环境，在保留原版游戏核心乐趣的同时，充分利用VR技术的交互特性，为玩家带来全新的、更具临场感的追逐与探索体验。

### 1.3 目标平台
主流的6DoF (六自由度) VR设备，如PICO 3/4。

## 2. 核心玩法机制 (VR化适配)

### 2.1 玩家移动与控制

#### 方案A (传送移动) - 推荐方案
- 玩家使用手柄射线指定传送点，实现快速、不易晕动的位移
- 适合大众玩家，减少VR晕动症

#### 方案B (摇杆平滑移动) - 可选方案
- 提供左手柄摇杆控制平滑移动及转向的选项
- 必须提供"隧道视觉"或"snap turn"等防晕动辅助功能

#### 吃豆动作
- 玩家通过控制VR角色（如头盔或虚拟身体的移动）与豆子（能量豆/普通豆）发生碰撞来自动完成"吃"的动作，无需额外按键

### 2.2 视角与迷宫

#### 第三人称追随视角
- 摄像机位于玩家角色身后上方，提供完整的迷宫视野，便于策略规划

#### 第一人称视角 (可选)
- 提供一种可切换的第一人称模式，增加沉浸感和紧张感

#### 迷宫设计
- 将经典2D迷宫重构为3D立体空间，包含上下坡、不同高度的通道、可开启的门等
- 迷宫材质与照明需营造出VR环境下的科幻或怀旧氛围

### 2.3 鬼魂行为与交互

#### 经典行为模式保留
- 鬼魂"Blinky"(红色) 、"Pinky"(粉色) 、"Inky"(蓝色) 、"Clyde"(橙色) 保持其经典的追踪、拦截、随机等AI模式

#### VR惊吓元素
- 当鬼魂靠近时，可配合头戴式显示器的3D音频，实现从玩家身后、侧面突然出现的惊吓效果
- 鬼魂穿身而过时可加入轻微的屏幕闪烁或震动反馈

#### 能量豆与反击
- 吃掉能量豆后，鬼魂会变为蓝色并可被吞噬
- 玩家需主动"撞向"鬼魂进行吞噬，此时可设计一个简短的吞噬动画特写

## 3. 游戏功能模块详细说明

### 3.1 场景与对象

#### 迷宫生成
- 需生成一个固定或可变的3D迷宫结构
- 墙面需带有碰撞体

#### 豆子系统

##### 普通豆子
- 分散在迷宫路径上，提供基础分数

##### 能量豆
- 在迷宫四个角落附近放置，吃掉后进入"狩猎模式"

##### 水果奖励
- 定期在迷宫中央出现，吃掉可获得高分

##### 鬼魂重生点
- 迷宫中央区域的鬼魂巢穴，鬼魂被吞噬后在此复活

### 3.2 玩家系统

#### 生命值与状态
- 初始3条生命
- 被普通状态鬼魂碰到即损失一条生命
- 生命耗尽游戏结束

#### 分数系统
- 吃豆、吃水果、吞噬鬼魂（分数递增）获得相应分数
- 提供本地高分榜

### 3.3 UI/UX 设计

#### 游戏内HUD
- 在视野下方或手腕上显示当前分数、剩余生命、当前等级

#### 菜单系统
- VR环境下的3D UI菜单，用于开始游戏、暂停、退出、切换设置

## 4. 技术规范

### 4.1 引擎与渲染

#### 首选引擎
- Unity (URP渲染管线以获得更佳性能)

#### 关键渲染技术
- 针对VR进行优化，确保72/90/120Hz的稳定帧率
- 使用低延迟的渲染管线
- 应用基于距离的LOD (多层次细节) 系统

### 4.2 物理与交互

#### 碰撞检测
- 为玩家、豆子、鬼魂、墙面设置精确的碰撞体

#### VR控制器输入
- 处理手柄的按钮、摇杆、扳机键输入，用于传送、菜单交互等

### 4.3 音频系统

#### 空间化3D音频
- 用于鬼魂移动声、吃豆声、能量豆生效声，以提供方位感

#### 背景音乐
- 循环播放经典的《吃豆人》背景音乐改编版

## 5. 开发计划

### 阶段1: 项目设置与基础框架 (1-2周)
- Unity项目初始化
- PICO SDK集成
- 基础场景搭建
- VR控制器输入系统

### 阶段2: 核心游戏机制 (2-3周)
- 迷宫设计与实现
- 玩家移动系统
- 豆子收集机制
- 基础UI系统

### 阶段3: AI与游戏逻辑 (2-3周)
- 鬼魂AI实现
- 能量豆机制
- 分数与生命系统
- 游戏状态管理

### 阶段4: 视觉与音效 (1-2周)
- 3D模型与材质
- 灯光与特效
- 音频系统集成
- UI/UX优化

### 阶段5: 优化与测试 (1周)
- 性能优化
- VR舒适度调整
- Bug修复
- 用户测试

## 6. 资源需求

### 技术资源
- Unity 3D开发经验
- C#编程技能
- VR开发经验
- 3D建模基础

### 美术资源
- 迷宫3D模型
- 角色模型 (Pac-Man, Ghosts)
- UI素材
- 纹理与材质

### 音频资源
- 经典音效改编
- 背景音乐
- 3D空间音频

## 7. 风险评估

### 技术风险
- VR性能优化挑战
- 晕动症控制
- 控制器输入延迟

### 美术风险
- 3D模型质量
- 动画流畅度
- UI适配VR环境

### 时间风险
- 平台适配时间
- 测试与调试周期
- 迭代优化时间